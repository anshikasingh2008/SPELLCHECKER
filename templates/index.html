<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>SpellChecker App</title>
    <style>
      body { font-family: Arial, Helvetica, sans-serif; max-width:800px; margin:40px auto; padding:0 16px; }
      textarea { width:100%; height:160px; font-size:16px; }
      button{ padding:8px 12px; font-size:16px; }
      pre { background:#f6f8fa; padding:12px; }
      .correction { color: #b30000; }
    </style>
  </head>
  <body>
    <h1>SpellChecker App</h1>
    <p>Type or paste text below and click <strong>Check</strong>.</p>
    <textarea id="inputText" placeholder="Type text here..."></textarea>
    <div style="margin-top:8px">
      <button id="checkBtn">Check</button>
    </div>

    <h3>Corrected Text</h3>
    <pre id="corrected">(no results yet)</pre>

    <h3>Corrections</h3>
    <div id="corrections">(no results yet)</div>

    <script>
      const btn = document.getElementById('checkBtn');
      btn.addEventListener('click', async () => {
        const text = document.getElementById('inputText').value;
        if (!text.trim()) return;
        const resp = await fetch('/api/correct', {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify({text})
        });
        const data = await resp.json();
        document.getElementById('corrected').textContent = data.corrected_text;
        const correctionsDiv = document.getElementById('corrections');
        if (data.corrections && data.corrections.length){
          correctionsDiv.innerHTML = '';
          const ul = document.createElement('ul');
          data.corrections.forEach(([orig, sugg]) => {
            const li = document.createElement('li');
            li.innerHTML = `<span class="correction">${orig}</span> â†’ ${sugg}`;
            ul.appendChild(li);
          });
          correctionsDiv.appendChild(ul);
        } else {
          correctionsDiv.textContent = '(no corrections)';
        }
      });
    </script>
  </body>
</html>
